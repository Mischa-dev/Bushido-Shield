:root{
  --brand:#DC2626;
  --ink:#0F172A;
  --t-info:#CFFAFE;
  --t-alert:#FEE2E2;
  --bg:#F7FAFC;
  --panel:#FFFFFF;
  --border:rgba(15,23,42,.10);
  --border-strong:rgba(15,23,42,.18);
  --success:#22C55E;
  --warning:#F59E0B;
  --info:#0EA5E9;
  --danger:#DC2626;
  --shadow-1:0 2px 10px rgba(15,23,42,.06);
  --shadow-2:0 10px 30px rgba(15,23,42,.12);
  --ring:rgba(220,38,38,.28);
  --font:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;
  --r-card:16px;
  --r-ctl:10px;
  --r-pill:999px;
  --space-1:4px;
  --space-2:8px;
  --space-3:12px;
  --space-4:16px;
  --space-5:20px;
  --space-6:24px;
  --space-8:32px;
  --ease:cubic-bezier(.2,.8,.2,1);
  --dur:140ms;
}

*{box-sizing:border-box;}

html,body{width:360px;height:560px;margin:0;background:var(--bg);color:var(--ink);font:400 14px/1.5 var(--font);overflow:hidden;}

body{display:flex;justify-content:center;align-items:center;}

#popup{display:grid;grid-template-rows:auto auto 1fr auto;gap:12px;padding:12px;border-radius:16px;background:var(--panel);box-shadow:var(--shadow-2);width:100%;height:100%;overflow:hidden;position:relative;}

header,main,footer,nav{font:inherit;color:inherit;}

.header{display:flex;align-items:center;justify-content:space-between;gap:12px;position:sticky;top:0;z-index:2;}

.brand{display:flex;align-items:center;gap:12px;min-width:0;}

.brand__logo{width:40px;height:40px;border-radius:12px;box-shadow:var(--shadow-1);}

.brand__copy{display:flex;flex-direction:column;gap:2px;min-width:0;}

.brand__name{font:600 16px/1.2 var(--font);color:var(--ink);white-space:nowrap;}

.brand__tagline{font:500 12px/1 var(--font);color:rgba(15,23,42,.65);}

.header__actions{display:flex;align-items:center;gap:10px;}

.pill{display:inline-flex;align-items:center;gap:.5ch;padding:.35rem .8rem;border-radius:var(--r-pill);border:1px solid var(--border);background:#fff;font:600 13px/1 var(--font);}

.pill--ok,.pill.connected{background:color-mix(in srgb,#fff 90%, var(--success) 10%);border-color:color-mix(in srgb,var(--success) 40%, #fff 60%);}

.pill--paused,.pill.paused{background:var(--t-alert);border-color:color-mix(in srgb,var(--danger) 40%, #fff 60%);}

.menu{position:relative;}

.menu__toggle{display:inline-flex;align-items:center;gap:4px;border-radius:var(--r-ctl);border:1px solid var(--border);background:#fff;padding:.45rem .7rem;font:600 13px var(--font);cursor:pointer;transition:transform var(--dur) var(--ease),box-shadow var(--dur) var(--ease);min-height:40px;}

.menu__toggle:hover{transform:translateY(-1px);box-shadow:var(--shadow-1);}

.menu__toggle:focus-visible{outline:3px solid var(--ring);outline-offset:2px;}

.menu__list{position:absolute;right:0;top:calc(100% + 6px);background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow-2);padding:6px;display:none;min-width:184px;z-index:10;}

.menu[data-open="true"] .menu__list{display:grid;gap:4px;}

.menu__item{border:none;background:transparent;text-align:left;padding:8px 10px;border-radius:var(--r-ctl);font:500 14px var(--font);cursor:pointer;transition:background var(--dur) var(--ease);min-height:40px;}

.menu__item:hover,.menu__item:focus-visible{background:rgba(15,23,42,.06);outline:none;}

.tabs{display:flex;gap:8px;}

.tab{border:1px solid var(--border);border-radius:var(--r-pill);padding:.45rem .9rem;background:#fff;color:var(--ink);font:600 13px var(--font);cursor:pointer;transition:transform var(--dur) var(--ease),box-shadow var(--dur) var(--ease);min-height:40px;}

.tab:hover{transform:translateY(-1px);box-shadow:var(--shadow-1);}

.tab.is-active{box-shadow:0 0 0 2px var(--brand) inset;background:color-mix(in srgb,#fff 92%, var(--brand) 8%);}

.tab:focus-visible{outline:3px solid var(--ring);outline-offset:2px;}

.content{position:relative;overflow:hidden;}

.view{display:none;height:100%;}

.view.is-active{display:flex;}

.panel{background:rgba(15,23,42,.02);border-radius:var(--r-card);border:1px solid var(--border);box-shadow:var(--shadow-1);padding:16px;display:flex;flex-direction:column;gap:16px;width:100%;}

.panel--home{justify-content:space-between;}

.dial{display:grid;justify-items:center;gap:10px;}

.dial__button{position:relative;width:150px;height:150px;border-radius:50%;border:1px solid var(--border);background:linear-gradient(160deg,rgba(15,23,42,.08),rgba(15,23,42,.16));display:grid;place-items:center;font:700 16px var(--font);letter-spacing:.2em;color:var(--ink);cursor:pointer;transition:transform var(--dur) var(--ease),box-shadow var(--dur) var(--ease),background var(--dur) var(--ease);min-height:150px;}

.dial__button[data-state="on"],.dial__button.on{background:linear-gradient(180deg,rgba(220,38,38,.92),rgba(185,28,28,.88));color:#fff;box-shadow:0 12px 20px rgba(220,38,38,.28);}

.dial__button:focus-visible{outline:3px solid var(--ring);outline-offset:3px;}

.dial__button:hover{transform:translateY(-1px);}

.dial__glow{position:absolute;inset:16px;border-radius:50%;background:rgba(255,255,255,.12);pointer-events:none;} 

.dial__button[data-state="off"] .dial__glow{opacity:.4;}

.dial__label{z-index:1;}

.helper{margin:0;font:500 13px/1.4 var(--font);color:rgba(15,23,42,.65);text-align:center;}

.home-meta{display:flex;flex-direction:column;gap:16px;}

.mode{display:flex;gap:12px;align-items:center;flex-wrap:wrap;}

.field{display:flex;flex-direction:column;gap:6px;}

.label{font:500 12px/1 var(--font);color:rgba(15,23,42,.7);text-transform:uppercase;letter-spacing:.05em;}

.select{position:relative;width:150px;}

.select select{appearance:none;-webkit-appearance:none;width:100%;height:40px;border-radius:var(--r-ctl);border:1px solid var(--border);padding:.4rem 2rem .4rem .7rem;font:500 14px var(--font);color:var(--ink);background:#fff url("data:image/svg+xml,%3Csvg viewBox='0 0 20 20' fill='%230F172A' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.5 7.5l4.5 5 4.5-5'/%3E%3C/svg%3E") no-repeat right .6rem center/16px;transition:border-color var(--dur) var(--ease),box-shadow var(--dur) var(--ease);}

.select select:focus{outline:3px solid var(--ring);outline-offset:2px;}

.device-chip{display:flex;flex-direction:column;gap:4px;border-radius:var(--r-card);border:1px solid var(--border);background:#fff;padding:10px 12px;min-width:140px;}

.device-chip__value{font:600 14px var(--font);color:var(--ink);}

.stats-row{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;}

.stat{background:#fff;border:1px solid var(--border);border-radius:var(--r-card);padding:10px 12px;display:flex;flex-direction:column;gap:6px;min-height:60px;}

.stat__label{font:500 12px/1 var(--font);color:rgba(15,23,42,.65);text-transform:uppercase;letter-spacing:.05em;}

.stat__value{font:600 16px/1.2 var(--font);color:var(--ink);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

.stat--wide{grid-column:span 1;}

.actions{display:flex;gap:12px;justify-content:flex-end;}

.btn{border-radius:var(--r-ctl);padding:.55rem .95rem;font:600 14px var(--font);border:1px solid var(--border);background:#fff;color:var(--ink);cursor:pointer;transition:transform var(--dur) var(--ease),box-shadow var(--dur) var(--ease);min-height:40px;}

.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow-1);}

.btn:focus-visible{outline:3px solid var(--ring);outline-offset:2px;}

.btn--primary{background:var(--brand);border-color:var(--brand);color:#fff;}

.btn--ghost{background:transparent;}

.panel--devices{justify-content:space-between;}

.panel__header{display:flex;flex-direction:column;gap:4px;}

.h2{font:600 18px/1.3 var(--font);margin:0;}

.muted{color:rgba(15,23,42,.65);margin:0;font-size:13px;}

.device-list{display:flex;flex-direction:column;gap:10px;flex:1 1 auto;}

.device-row{display:grid;grid-template-columns:1fr;gap:10px;border:1px solid var(--border);border-radius:var(--r-card);background:#fff;padding:12px;box-shadow:var(--shadow-1);min-height:52px;}

.device-row__meta{display:flex;flex-direction:column;gap:4px;min-width:0;}

.device-row__name{font:600 14px var(--font);color:var(--ink);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

.device-row__type{font:500 12px var(--font);color:rgba(15,23,42,.6);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

.device-row__controls{display:flex;align-items:center;justify-content:space-between;gap:8px;}

.switch{display:inline-flex;align-items:center;gap:8px;border:none;background:transparent;padding:0;cursor:pointer;min-height:40px;}

.switch:focus-visible{outline:3px solid var(--ring);outline-offset:4px;border-radius:var(--r-pill);}

.switch__track{width:46px;height:26px;border-radius:var(--r-pill);background:rgba(15,23,42,.14);position:relative;transition:background var(--dur) var(--ease);}

.switch__thumb{position:absolute;width:20px;height:20px;border-radius:50%;background:#fff;top:3px;left:3px;box-shadow:var(--shadow-1);transition:transform var(--dur) var(--ease);}

.switch[data-state="on"] .switch__track{background:var(--brand);}

.switch[data-state="on"] .switch__thumb{transform:translateX(20px);}

.switch__text{font:600 13px var(--font);color:var(--ink);}

.device-row__select{flex:1 1 140px;display:flex;flex-direction:column;gap:6px;}

.select--small select{height:36px;font-size:13px;padding:.35rem 1.8rem .35rem .65rem;}

.footer{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:10px 12px;border:1px solid var(--border);border-radius:var(--r-card);background:#fff;box-shadow:var(--shadow-1);font:500 12px/1 var(--font);color:rgba(15,23,42,.7);white-space:nowrap;overflow:hidden;}

.footer__item{overflow:hidden;text-overflow:ellipsis;}

.footer__value{color:var(--ink);font-weight:600;}

.footer__dot{padding:0 4px;}

.toast-stack{position:absolute;right:16px;bottom:16px;display:grid;gap:8px;z-index:20;}

.toast{background:#fff;border:1px solid var(--border);border-radius:12px;padding:.6rem .9rem;box-shadow:var(--shadow-2);font:600 13px var(--font);color:var(--ink);}

.is-loading{position:relative;pointer-events:none;}

.is-loading::after{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(110deg,rgba(255,255,255,.1),rgba(255,255,255,.4),rgba(255,255,255,.1));animation:shimmer .8s linear infinite;mix-blend-mode:screen;}

@keyframes shimmer{0%{transform:translateX(-100%);}100%{transform:translateX(100%);}}

@media (max-height:560px){
  .stats-row{grid-template-columns:repeat(3,minmax(0,1fr));}
}

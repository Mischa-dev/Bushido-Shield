<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bushido Shield — Dashboard (MVP)</title>
  <style>
    body{font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;margin:0;color:#0f172a;background:#f8fafc}
    header{padding:14px 16px;background:#0f172a;color:white;display:flex;align-items:center;gap:10px}
    main{padding:16px;max-width:960px}
    .card{border:1px solid #e2e8f0;border-radius:12px;padding:16px;margin:16px 0;background:#fff;box-shadow:0 10px 24px rgba(15,23,42,.04)}
    .card h2{margin:4px 0 6px}
    .muted{color:#475569;font-size:14px}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{border-bottom:1px solid #e2e8f0;padding:8px;text-align:left;font-size:14px}
    th{background:#f8fafc;text-transform:uppercase;font-size:12px;letter-spacing:.06em;color:#334155}
    .toggle-list{display:grid;gap:10px;margin:14px 0}
    .toggle-item{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 14px;border-radius:12px;border:1px solid #dbeafe;background:#eff6ff}
    .toggle-item strong{font-size:15px}
    .toggle-item span{font-size:13px;color:#475569}
    .toggle-item input{width:20px;height:20px}
    .custom-host-form{margin:16px 0}
    .custom-host-form label{display:flex;flex-direction:column;gap:6px;font-weight:600;color:#0f172a}
    .custom-host-form .input-group{display:flex;gap:8px}
    .custom-host-form input{flex:1;padding:9px 12px;border-radius:10px;border:1px solid #cbd5f5;font:inherit}
    .custom-host-form input:focus{outline:2px solid #0ea5e9;outline-offset:1px}
    .custom-host-form button{padding:9px 16px;border-radius:10px;border:none;background:#0ea5e9;color:#fff;font-weight:600;cursor:pointer;box-shadow:0 4px 12px rgba(14,165,233,.25)}
    .custom-host-form button:hover{background:#0284c7}
    .custom-hosts{margin-top:12px}
    .custom-hosts h3{margin:0 0 6px;font-size:15px}
    .chip-list{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0 0;padding:0;list-style:none}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:999px;background:#e2e8f0;font-size:13px;color:#0f172a}
    .chip button{border:none;background:transparent;color:#0f172a;font-weight:700;cursor:pointer;font-size:13px}
    .chip button:hover{color:#dc2626}
    .reset-button{margin-top:12px;padding:9px 16px;border-radius:10px;border:1px solid #cbd5f5;background:#fff;font-weight:600;cursor:pointer;color:#0f172a}
    .reset-button:hover{background:#f1f5f9}
    .status-text{margin-top:10px;font-size:13px}
    .status-text.warning{color:#f97316;font-weight:600}
    .status-text.success{color:#047857;font-weight:600}
    @media (max-width:700px){
      main{padding:12px}
      .card{padding:14px}
    }
  </style>
</head>
<body>
  <header>
    <!-- Inline SVG icon to avoid external file dependency -->
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <rect width="24" height="24" rx="4" fill="#0f172a" />
      <path d="M6 10c2-2 5-3 8-3s6 1 8 3v4c-2 2-5 3-8 3s-6-1-8-3v-4z" fill="#10b981" opacity="0.95" />
      <circle cx="12" cy="9" r="1.5" fill="#fff" />
    </svg>
    <h1 style="margin:0;font-size:18px;">Bushido Shield — Dashboard (MVP)</h1>
  </header>
  <main>
    <div class="card">
      <h2 style="margin:4px 0;">Devices</h2>
      <p class="muted">For now, this MVP tracks only <strong>this device</strong>. Later, you'll see every household device here and assign modes.</p>
      <div id="deviceBlock"></div>
    </div>
    <div class="card">
      <h2 style="margin:4px 0;">Per‑site settings (this device)</h2>
      <table id="sitesTable">
        <thead><tr><th>Origin</th><th>Blocking</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="card">
      <h2 style="margin:4px 0;">Modes</h2>
      <p class="muted">Modes affect behavior on every site. <strong>Focus</strong> blocks social/video domains with a friendly overlay.</p>
      <label>Mode:
        <select id="mode">
          <option value="Default">Normal</option>
          <option value="School">School</option>
          <option value="Focus">Focus</option>
          <option value="Sleep">Sleep</option>
          <option value="Custom">Custom</option>
          <option value="Travel">Travel</option>
          <option value="Gaming">Gaming</option>
          <option value="Reading">Reading</option>
        </select>
      </label>
    </div>
    <div class="card">
      <h2>Network filtering</h2>
      <p class="muted">These controls power Bushido Shield's DNS-style blocking using the browser's declarative rules engine.</p>
      <div id="rulesetList" class="toggle-list" role="group" aria-label="Blocklist categories"></div>
      <form id="customHostForm" class="custom-host-form">
        <label for="customHostInput">Add a custom host or filter
          <div class="input-group">
            <input id="customHostInput" type="text" placeholder="ads.example.com or ||tracker.com^" autocomplete="off" />
            <button type="submit">Add</button>
          </div>
        </label>
      </form>
      <div class="custom-hosts">
        <h3>Custom blocklist</h3>
        <p class="muted" id="customHostEmpty">No custom hosts yet. Add one above to extend protection.</p>
        <ul id="customHostList" class="chip-list" aria-live="polite"></ul>
      </div>
      <button type="button" id="resetStatsBtn" class="reset-button">Reset blocked request counters</button>
      <p class="muted status-text" id="blockingStatus"></p>
    </div>
  </main>
  <script src="options.js" type="module"></script>
</body>
</html>
